---
import Program from './Program.astro';
import type { Program as programProps } from '../tv/domain/Program';
import DialogProgram from './DialogProgram.astro';

interface Props {
  programs: programProps[];
  key: string;
}

const programs = Astro.props.programs;
const program = programs[0];
const count = Astro.props.programs.length;
const episodes = Astro.props.programs.slice(1);
const key = Astro.props.key;

const programEndpoint = { startDate: programs[0].start.toString(), endDate: programs[programs.length -1].stop.toString() };
const programDate = programs.map(program => {
    return { startDate: program.start.toString(), endDate: program.stop.toString() };
});
---

<Program program={program} count={count} key={key} programEndpoint={programEndpoint} programDate={programDate}>
    {episodes.length > 0 ?
        <DialogProgram programs={episodes} title={program.title} key={`episode${key}`} />
        : null
    }
</Program>